<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>W4VES</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <script src= "https://www.gstatic.com/firebasejs/7.14.4/firebase.js"></script>
  <script src="../vector.js"></script>
  <script src="../SvgPlus.js"></script>
  <body>
    <div id = "svg-box">

    </div>
    <svg id = "add" viewBox="0 0 95.3 147.3">

      <path style="fill:none;stroke:#F26522;stroke-width:8;stroke-miterlimit:10;" d="M80,143.3H15.3C9.1,143.3,4,138.2,4,132V32.7
      c0-6.2,5.1-11.3,11.3-11.3H80c6.2,0,11.3,5.1,11.3,11.3V132C91.3,138.2,86.2,143.3,80,143.3z"/>
      <path style="fill:none;stroke:#F26522;stroke-width:8;stroke-miterlimit:10;" d="M60.8,41H38.5c-5.4,0-9.8-4.4-9.8-9.8v-9.8h42v9.8
      C70.7,36.6,66.2,41,60.8,41z"/>
      <circle style="fill:none;stroke:#F26522;stroke-width:8;stroke-miterlimit:10;" cx="49.7" cy="12.7" r="8.7"/>
      <path style="fill:none;stroke:#F26522;stroke-width:8;stroke-miterlimit:10;" d="M56.8,66.8c-27,0,23.2,26.7-20.1,45.5"/>
      <g style="opacity:0.4;">
        <g>
          <line style="fill:none;stroke:#8C523B;stroke-width:3;stroke-miterlimit:10;" x1="67.5" y1="66.8" x2="31.8" y2="66.8"/>
          <g>
            <polygon style="fill:#8C523B;" points="63.9,63.7 67,66.8 63.9,69.8 66.5,69.8 69.5,66.8 66.5,63.7 			"/>
          </g>
          <g>
            <polygon style="fill:#8C523B;" points="35.4,63.7 32.4,66.8 35.4,69.8 32.8,69.8 29.8,66.8 32.8,63.7 			"/>
          </g>
        </g>
      </g>
      <circle style="opacity:0.4;fill:#8C523B;" cx="56.8" cy="66.8" r="4.1"/>
      <g style="opacity:0.4;">
        <g>
          <line style="fill:none;stroke:#8C523B;stroke-width:3;stroke-miterlimit:10;" x1="69.3" y1="98.6" x2="18.5" y2="120"/>
          <g>
            <polygon style="fill:#8C523B;" points="64.8,97.1 68.8,98.8 67.2,102.8 69.5,101.7 71.2,97.7 67.2,96.1 			"/>
          </g>
          <g>
            <polygon style="fill:#8C523B;" points="20.6,115.8 19,119.8 23,121.4 20.6,122.5 16.6,120.8 18.2,116.8 			"/>
          </g>
        </g>
      </g>
      <circle style="opacity:0.4;fill:#8C523B;" cx="36.7" cy="112.3" r="4.1"/>
    </svg>

  </body>
  <script type="text/javascript">

      const firebaseConfig = {
      apiKey: "AIzaSyDniS0prRjEmOyKbMd4jequo9gkwe2otKI",
      authDomain: "fashion-galetora.firebaseapp.com",
      databaseURL: "https://fashion-galetora.firebaseio.com",
      projectId: "fashion-galetora",
      storageBucket: "fashion-galetora.appspot.com",
      messagingSenderId: "469438762797",
      appId: "1:469438762797:web:759f543ce82183b9f04da4",
      measurementId: "G-Q7DJ37H3D0"
    };

    firebase.initializeApp(firebaseConfig);

    let add = document.getElementById('add');
    add.onclick = async function() {
      let content = null
      try{
        content = await navigator.clipboard.readText();
      }catch(e){
        throw e
        return
      }
      let svg = null
      try{
        svg = new SvgElement(content);
      }catch(e){
        alert('Invalid SVG');
        throw e;
        return
      }
      svg.fireSave(['svgShare']);
    }
    firebase.database().ref('svgShare').on('value', (e) => {
      let svgBox = document.getElementById('svg-box');
      let svgs = e.val();
      for (var key in svgs){
        let svg = new SvgElement(svgs[key]);
        svg.el.ondblclick = () => {
          svg.saveSvg(key.slice( 2, 5) + 'file')
        }
        svgBox.appendChild(svg.el);
      }
    })
  </script>

  <style type = "text/css">
    svg{
    }
    #add{
      top: 20px;
      left: 20px;
      width: 50px;
      position: fixed;
    }
    #svg{
      pointer-events: none;
    }
  </style>

</html>
